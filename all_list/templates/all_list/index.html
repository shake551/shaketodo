{% load static %}
<!DOCTYPE html>
<html lang="jp"> 
<head>
    <meta charset="UTF-8">
    <title>all_list</title>
    <style>
        table{
            width: 100%;
            height: 100%;
            table-layout: fixed;
        }
        .fixbox{
            border: 1;
            width: 100%;
            height: 100%;
            top: 5px;
            position: sticky;
            color: #fff;
            background: #333;
            z-index: 1;
        }
        .calrow{
            height: 100%;
        }
        .calbox{
            width: 100%;
            height: 100%;
            padding-top: 10%;
            table-layout: fixed;
            height: auto;
            position: relative;
            text-align: center;
        }
        label{
            position: absolute;
            display: inline-block;
            width: 100%;
            height: 100%;
            top: 0%;
            left: 0%;
            background: #ecc09630;
        }
        label span:hover{
            cursor: pointer;
        }
        input[type="checkbox"]{
            display: none;
            width: 100%;
            height: 100%;
        }
        .day{
            position: absolute;
            right: 5%;
            top: 0%;
        }
        .cal-task{
            width: 100%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateY(-50%) translateX(-50%);
            -webkit-transform: translateY(-50%) translateX(-50%);
            height: 75%;
            overflow: scroll;
            text-align: center;
            display: inline-block;
        }
        .todo{
            display: inline-block;
            width: 100%;
            text-align: center;
            overflow: scroll;
        }
        .checkbox{
            position: absolute;
            display: inline-block;
            left: 5%;
            content: '';
            width: 20px;
            height: 20px;
            border: 1px solid #9c9c9c;
            border-radius: 50%;
        }
        .check{
            content: '';
            display: inline-block;
            position: absolute;
            left: 20%;
            top: 30%;
            width: 10px;
            height: 5px;
            border-left: solid #25AF01;
            border-bottom: solid #25AF01;
            transform: rotate(-45deg);
        }
        #popup{
            width: 100%;
            height: 100%;
            background: none;
            box-sizing: border-box;
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            z-index: 1;
        }
        /*checkboxがcheckの状態になったらpopupを表示させる*/
        input[type="checkbox"]:checked + #popup{
            display: block;
        }
        .popup-box{
            width: 50%;
            line-height: 100%;
            height: 50%;
            background: #fff;
            border: 5px solid #000;
            border-radius: 10px;
            padding: 0 4%;
            box-sizing: border-box;
            position: fixed;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            z-index: 5;
        }
        .popup-todo{
            width: 100%;
            position: relative;
            height: 65%;
            overflow: scroll;
            text-align: center;
            display: inline-block;
        }
        .edit-button, .delete-button{
            border-radius: 10px;
            position: absolute;
            display: inline-block;
            content: '';
        }
        .edit-button{
            background: rgba(124, 164, 238, 0.502);
            right: 5%;
        }
        .delete-button{
            background: rgba(238, 124, 124, 0.502);
            right: 15%;
        }
        .back-btn{
            background: #9c9c9c;
            border-radius: 7px;
            position: absolute;
            display: inline-block;
            content: '';
            bottom: 5%;
            right: 10%;
            width: 20%;
        }
        .btn, .box-btn{
            position: relative;
            width: 5%;
            padding-top: 5%;
            background: gray;
            border-radius: 50%;
            left: 50%;
        }
        .box-btn{
            position: absolute;
            bottom: 5%;
        }
        .link, .box-link{
            position: absolute;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            width: 100%;
            text-align: center;
            color: white;
            text-decoration: none;
        }
        .link{
            font-size: 5vw;
        }
        .box-link{
            font-size: 2vw;
        }
    </style>
</head>

<body>
    <h1>
        {{ year_and_month }}
    </h1>
    <div>
        <table class="fixbox", border="1">
            <tr>
                <th>
                    <p align="center">
                        Su
                    </p>
                </th>
                <th>
                    <p align="center">
                        Mo
                    </p>
                </th>
                <th>
                    <p align="center">
                        Tu
                    </p>
                </th>
                <th>
                    <p align="center">
                        We
                    </p>
                </th>
                <th>
                    <p align="center">
                        Th
                    </p>
                </th>
                <th>
                    <p align="center">
                        Fr
                    </p>
                </th>
                <th>
                    <p align="center">
                        Sa
                    </p>
                </th>
            </tr>
        </table>
        <table border="1" , width="100%">
            {% for data in monthly_calendar %}
            <tr class="calrow">
                {% for day, todo in data %}
                <td class="calbox">
                    {% if day != '' %}
                    <label>
                        <span>
                            <p>
                                <span class="day">
                                    {{ day }}
                                </span>
                                <div class="cal-task">
                                    {% for task in todo %}
                                    {% if task.0 != '' %}
                                    <span class="todo">
                                        <span class="checkbox">
                                            {% if task.2 == True %}
                                            <span class="check"></span>
                                            {% endif %}
                                        </span>
                                        {{ task.0 }}
                                    </span>
                                    {% else %}
                                    <span class="todo"></span>
                                    {% endif %}
                                    {% endfor %}
                                </div>
                            </p>
                        </supan>
                        <input type="checkbox" name="checkbox">
                            <div id="popup">
                                <div class="popup-box">
                                    <p>
                                        <h1>
                                            {{ day }}日
                                        </h1>
                                        <div class="popup-todo">
                                        {% for task in todo %}
                                        {% if task.0 != '' %}
                                            <h3>
                                            <span class="todo">
                                                <span class="checkbox">
                                                    {% if task.2 == True %}
                                                    <span class="check"></span>
                                                    {% endif %}
                                                </span>
                                                    {{ task.0 }}
                                                    <button onclick="location.href='{% url 'edit' task.1 %}'" class="edit-button">edit</button>
                                                    <button onclick="location.href='{% url 'delete' task.1 %}'" class="delete-button">delete</button>
                                            </span>
                                            </h3>
                                            {% else %}
                                            <span class="todo">
                                                <h3>
                                                    taskは登録されていません
                                                </h3>
                                            </span>
                                            {% endif %}
                                            {% endfor %}
                                        </div>
                                    </p>
                                    <div class="box-btn">
                                        <a href="/all_list/create" class="box-link">＋</a>
                                    </div>
                                    <!--<button onclick="location.href='{% url 'create' %}'" class="cre_btn" value="+"></button>-->
                                    <input type="button" onclick="location.href='./cal'" value="戻る" class="back-btn">
                                </div>
                            </div>
                        </label>
                        {% endif %}
                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </table>
        </div>
    <div class="btn">
        <a href="/all_list/create" class="link">＋</a>
    </div>
</body>
</html>